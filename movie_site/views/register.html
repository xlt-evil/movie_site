<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<style type="text/css">
		body{
		background-color: #f4f5f7;
		}
		.italic {
			font-style:oblique;
		}
		.padding20{
			padding-left: 40px; 
		}
		.div_1{
			margin-top:10px;
			border: 1px solid #999;
			width: 14%;
			border-radius: 15px;
			display: inline-block;
			background-color:transparent;
		}
		.select_1{
			border:none;
			color: #999;
			margin: 5px;
			outline: none;
			width: 20%;
			border-right: 1px solid #999;
			background-color: rgba(0,0,0,0);
		}
		.input_1{
			border:none;
			color: #999;
			outline: none;
			background-color: rgba(0,0,0,0);
		}

		.paddingright20{
			padding-right: 10%;
		}

		.center{
			margin: 0 auto;
			text-align: center;
		}
		.gray{
			margin: 10px;
			color: gray;
		}
		.movecenter{
			position: absolute;
			top: 10%;
		}
		.blue{
			outline: none;
		}
		.goodview a{
			color: #999;
			text-decoration: none;
			padding-left: 10%;
			padding-bottom: 5%;
		}
		.friend{
			text-decoration: none;
			font-size: 15px;
		}
		.movedown{
			margin-top: 10px;
		}
		.br1{
			border-right: 1px solid #eee;
		}
		.copy{
			background-color: #353f4b;
			color: white
		}
		.copy a {
			text-decoration: none;
		}



		body{
			background-image: url(../static/img/register.jpg);
		}

		.bk{
			background-color: rgba(12, 11, 11, 0.53);
			border:1px solid black;
			color: white;
			box-shadow: 10px 10px 10px black;
		}
	</style>
</head>
<body>
	 <div class="container"> 
		<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
			<!-- 100%宽度的响应式布局 -->
			<div class="container-fluid">
				<!-- 商标 -->
				<a href="/" class="navbar-brand italic" style="margin-left:200px;">Movie's Entral</a>
				<div class="collapse navbar-collapse">
					<ul class="nav navbar-nav " id="mytab">
						<li class="padding20" ><a href="/">首页</a></li>
						<li class="padding20"><a href="/tomovielirbary">电影库</a></li>
						<li class="padding20"><a href="">影评</a></li>
						<!--  style="margin-right: 500px;" -->
						<li class="padding20"><a href="">资讯</a></li>
					</ul>
					<ul class="nav navbar-nav navbar-right paddingright20" id="mytabs">
						<li class="padding20"><a href="" data-toggle="modal" data-target="#myModal">登录</a></li>
						<li class="padding20 active"><a href="/account/toregister">注册</a></li>
					</ul>

					<!-- <div class="div_1 ">
						<select class="select_1">
							<option>全部</option>
							<option>2</option>
							<option>3</option>
						</select>
						<input type="text" name="" class="input_1">
						<span class="glyphicon glyphicon-search"></span>
					</div>  -->
				</div>
			</div>
		</nav>
	</div>

	<!-- 登入注册 -->
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<!-- <br> -->
	<div class="container ">
		<div class="row">
		<ul class="list-group  col-lg-12">
			<li class="list-group-item col-lg-6 bk">
				<form class="form-horizontal " role="form" >
					<h3 class="text-center lead">登录</h3>
					<hr>
					<div class="form-group">
						<label class="col-sm-2 control-label">用户名</label>
						<div class="col-sm-6">
							<input type="text" name=""  placeholder="请输入用户名" class="form-control username">
							<span style="color:#ec7474"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">密码</label>
						<div class="col-sm-6">
							<input type="password" name="" placeholder="请输入密码" class="form-control password">
							<span style="color:#ec7474"></span>
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-10 col-sm-offset-2 ">
							<div class="checkbox">
								<label>
									<input type="checkbox" name="" checked="">记住密码
								</label>
							</div>
						</div>
					</div>
					<div class="form-group">
						 <div class="col-sm-12">
  							<button type="button" class="btn btn-primary btn-lg col-sm-4 col-sm-offset-2" id="login">登录</button>
  							<span style="color:#ec7474"></span>
						</div>
					</div>
					<div class="form-group" style="margin-bottom: 4.5%;">
						 <div class="col-sm-3 col-sm-offset-2">
  							<a href="" style="text-decoration: none;"  data-toggle="modal" data-target="#myModal">忘记密码？</a>
						</div>
					</div>
					<br>
					<br>
					<br>
				</form>
			</li>
			<li class="list-group-item col-lg-6 bk">
				<form class="form-horizontal" role="form">
					<h3 class="lead text-center">注册</h3>
					<hr>
					<div class="form-group">
						<label class="col-sm-2 control-label">用户名</label>
						<div class="col-sm-6">
							<input type="text" name=""  placeholder="请输入6~11的账号" class="form-control username">
							<span style="color:#ec7474"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">密码</label>
						<div class="col-sm-6">
							<input type="password" name="" placeholder="请输入6~11的密码" class="form-control password">
							<span style="color:#ec7474"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">确认密码</label>
						<div class="col-sm-6">
							<input type="password" name="" placeholder="请输入密码" class="form-control passwords">
							<span style="color:#ec7474"></span>
						</div>
					</div>
					<div class="form-group">
						 <div class="col-sm-9 col-sm-offset-2">
						 	<div class="input-group">
  								<select class="form-control selected">
  									<option value="2">你的爱好</option>
  									<option value="1">你的名字</option>
  									<option value="3">你喜欢的人</option>
  								</select>
  								<span class="input-group-addon">选择找回密码问题！</span>
  							</div>
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-6 col-sm-offset-2">
							<input type="text" name="" placeholder="请输入答案" class="form-control answer">
							<span style="color:#ec7474"></span>
						</div>
					</div>
					<div class="form-group">
						 <div class="col-sm-12">
  							<button type="button" class="btn btn-primary btn-lg col-sm-4 col-sm-offset-2" id="register">注册</button>
  							<span style="color:#ec7474"></span>
						</div>
					</div>
				</form>
			</li>
		</ul>
		</div>
	</div>

	<!-- 友情链接 -->
	<div class="container">
		<h1 style="">友情链接</h1>
		<div class="row friend">
    		<div class="col-sm-4 movedown" style="border-bottom:  1px solid #eee;"></div>
    		<div class="col-sm-1 br1">
    			<a href="">豆瓣电影</a>
    		</div>
    		<div class="col-sm-1 br1">
    			<a href="">80s</a>
    		</div>
    		<div class="col-sm-1 br1">
    			<a href="">IMDB</a>
    		</div>
    		<div class="col-sm-1 ">
    			<a href="">电影FM</a>
    		</div>
    		<div class="col-sm-4 movedown" style="border-bottom:  1px solid #eee;"></div>
		</div>
	</div>

	<!-- 页尾 -->
	 <div style="width: 100%;margin-top: 2%;" >
	    <div class="jumbotron copy" style="margin: 0">
	    	<div class="container">
  				<p class="text-center">本站所有信息均由互联网爬虫自动搜索得来，相关链接已注明来源，版权归原创者所有。</p>
  				<p class="text-center">如果无意中侵犯了您的权益，请通知我（hjlmzx5@163.com)，我们会及时做相应处理，谢谢合作。</p>
  			</div>
			<p class="text-center"><a href=""><small>&copy;Movie's Entral.com Author:Hxy</small></a></p>
		</div>
	</div>

	<!-- 找回密码模态框 -->
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLable" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content col-sm-8 col-sm-offset-2 ">
				<div class="modal-header">
					<!-- 关闭 -->
					<button type="button" class="close" data-dismiss="modal" aria-label="close"><span aria-hidden="true">&times;</span></button>
					<h3>找回密码</h3>
				</div>
				<div class="modal-body ">
					<div class="form-group col-lg-7">
						<select class="form-control">
							<option value="2" >你的爱好</option>
							<option value="1" >你的名字</option>
							<option value="3" >喜欢的人</option>
						</select>
					</div>
					<div class="form-group col-lg-10">
						<input type="text" name="" placeholder="请输入答案" id="answers">
					</div>
					<div class="form-group col-lg-10">
						<input type="text" name="" placeholder="请输入账号" id="account">
					</div>
					<div class="form-group col-lg-10">
						<button class="btn btn-default col-sm-3" style="margin-right:30%; " type="button" data-dismiss="modal" id="forgetpwd">提交</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript" src="../static/js/jquery-3.0.0.min.js"></script>
	<script type="text/javascript" src="../static/js/bootstrap.min.js"></script>
	<script type="text/javascript">
		$(function(){
			// 判断账户是否为空
			$(".username").blur(function(){
				var $name = $(this)
				if($name.val() == ""){
					$name.next().text("账户不能为空")
					return
				}else{
					$name.next().text("")
				}
				if($name.val().length < 6 || $name.val().length > 11){
					$name.next().text("请按要求的长度范围输入！")
				}else{
					$name.next().text("")
				}

			});

			// 判断密码是否为空
			$(".password").blur(function(){
				var $pwd = $(this)
				if($pwd.val() == ""){
					$pwd.next().text("密码不能为空")
					return
				}else{
					$pwd.next().text("")
				}
				if($pwd.val().length < 6 || $pwd.val().length > 11){
					$pwd.next().text("请按要求的长度范围输入！")
				}else{
					$pwd.next().text("")
				}
			});

			// 判断两次密码是否一致
			$(".passwords").blur(function(){
				var $pwd = $(this)
				if($pwd.val() == ""){
					$pwd.next().text("密码不能为空")
					return
				}else{
					$pwd.next().text("")
				}
				var pwd1 = $(".password")
				if( $(pwd1[1]).val() == $pwd.val()){
					$pwd.next().text("")
				}else{
					$pwd.next().text("两次密码不一致")
					return
				}
			});
			$(".answer").blur(function(){
				var $answer = $(this)
				if($answer.val() == ""){
					$answer.next().text("回答为空")
				}else{
					$answer.next().text("")
				}
			})
			
			$('#register').click(function(){
				$("#register").next().text('')
				var vals = $(this).parent().parent().parent().find("input")
				var vales =  {}
				for(var i = 0;i<vals.length;i++){
					vales[i] = $(vals[i]).val()
					if(vales[i] == "" ){
						alert("还有选项没填！")
						return
					}
				}
				if (vales[1].length <6 || vales[1].length >11 || vales[0].length <6 || vales[0].length >11){
					alert("按要求输入谢谢！")
					return
				}
				if(vales[1]!=vales[2]){
					alert("密码不一致，请重新填写")
					return
				}
				var val = $("select").val()
				$.ajax({
					url: '/account/register',
					type: 'post',
					dataType: 'json',	
					data: {
							"Uid": vales[0],
							"Password" :vales[1],
							"Question":val,
							"Answer":vales[3]
						  },
					success:function(result){
						if(result.Status){
							alert(result.Msg)
							for(var i = 0;i<vals.length;i++){
								$(vals[i]).val("")
							}
						}else{
							$("#register").next().text('账户已存在，请重新换一个')
						}
					},
					error:function(){
						alert("服务器出现问题请稍后重试")
					}
				})
			})

			$("#login").click(function(){
				$("#login").next().text('')
				var vals = $(this).parent().parent().parent().find("input")
				var vales =  {}
				for(var i = 0;i<2;i++){
					vales[i] = $(vals[i]).val()
					console.log(vales[i])
					if(vales[i] == "" ){
						alert("还有选项没填！")
						return
					}
				}
				if (vales[1].length <6 || vales[1].length >11 || vales[0].length <6 || vales[0].length >11){
					alert("按要求输入谢谢！")
					return
				}
				$.ajax({
					url:'/account/login',
					type:'get',
					dataType:'json',
					data:{
						"Uid":vales[0],
						"Password":vales[1]
					},
					success:function(result){
						if (result.Status) {
							alert(result.Msg)
							for(var i = 0;i<vals.length;i++){
								$(vals[i]).val("")
							}
							window.location.href = "/"
							return
						}
						$("#login").next().text(result.Msg)
					},
					error:function(){
						alert("服务器出现问题请稍后重试")
					}
				})
			});

			$("#forgetpwd").click(function(){
				var s = $("#account").val()
				var p = $("#answers").val()
				var v = $($('select')).eq(1).val()
				if( p == ""){
					alert("请填写答案")
					return
				}
				if ( s == ""){
					alert("账号为空,请填写")
					return 
				}
				$.ajax({
					url: '/account/forgetpassword',
					type: 'get',
					dataType: 'json',
					data: {"account":s,"answer":p,"question":v},
					success:function(result){
						if (result.Status) {
							alert(result.Msg+result.Object)
						}else{
							alert(result.Msg)
						}
					}

				})

			})
					
		});

	</script>
</body>
</html>